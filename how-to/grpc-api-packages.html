
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>gRPC API packages &#8212; PyAnsys developer&#39;s guide</title>
  
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/ansys-sphinx-theme.css?v=9e79609d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/ansys-sphinx-theme.css?v=9e79609d" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://www.nerdfonts.com/assets/css/webfont.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />


  <!-- Include desired assets -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  

  
    <link href="../_static/css/breadcrumbs.css" rel="stylesheet" />
  
    <script src="../_static/documentation_options.js?v=39bc45e2"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'how-to/grpc-api-packages';</script>
    <link rel="icon" href="../_static/ansys-favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Logging" href="logging.html" />
    <link rel="prev" title="Packaging" href="packaging.html" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2025-10-14" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="https://docs.pyansys.com/">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pyansys_logo_transparent_black.png" class="logo__image only-light" alt="PyAnsys developer's guide - Home"/>
    <img src="../_static/pyansys_logo_transparent_white.png" class="logo__image only-dark pst-js-only" alt="PyAnsys developer's guide - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">

<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../index.html" title="PyAnsys developer's guide home">Home</a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    How-to
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../all-styles.html">
    Style
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../abstractions/index.html">
    Abstractions
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../content-writing/index.html">
    Content writing
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav>
</div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">
<div class="search-bar pst-js-only" id="search-bar">
  <form class="bd-search d-flex align-items-center" action="../search.html" method="get">
    <i class="fa-solid fa-magnifying-glass"></i>
    <input type="search" class="form-control" name="q" placeholder="Search the docs ..."
      aria-label="Search the docs ..." autocomplete="off" autocorrect="off"
      autocapitalize="off" spellcheck="false" />
    <span class="search-button__kbd-shortcut">
      <kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd>
    </span>
  </form>
  <div id="static-search-results" class="static-search-results" style="display:none;" tabindex="0"></div>
</div></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/dev-guide" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://dev.docs.pyansys.com/how-to/contributing.html" title="Contribute" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-wrench fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Contribute</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  
  


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">

<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../index.html" title="PyAnsys developer's guide home">Home</a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    How-to
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../all-styles.html">
    Style
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../abstractions/index.html">
    Abstractions
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../content-writing/index.html">
    Content writing
  </a>
</li>

  </ul>
</nav>
</div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="search-bar pst-js-only" id="search-bar">
  <form class="bd-search d-flex align-items-center" action="../search.html" method="get">
    <i class="fa-solid fa-magnifying-glass"></i>
    <input type="search" class="form-control" name="q" placeholder="Search the docs ..."
      aria-label="Search the docs ..." autocomplete="off" autocorrect="off"
      autocapitalize="off" spellcheck="false" />
    <span class="search-button__kbd-shortcut">
      <kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd>
    </span>
  </form>
  <div id="static-search-results" class="static-search-results" style="display:none;" tabindex="0"></div>
</div></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/dev-guide" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://dev.docs.pyansys.com/how-to/contributing.html" title="Contribute" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-wrench fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Contribute</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="setting-up.html">Environment setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="supporting-python-versions.html">Python versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging.html">Packaging</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">gRPC API packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="documenting.html">Documenting</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="continuous-integration.html">Continuous integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasing.html">Releasing and publishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="repository-protection.html">Repository protection</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns-configuration.html">DNS configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="compatibility.html">Product compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="vulnerabilities.html">Vulnerabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecating.html">Deprecating a library</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">
<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
         
    <li class="breadcrumb-item breadcrumb-home">
      <a href="https://docs.pyansys.com/" class="nav-link">PyAnsys</a>
    </li>
     
    <li class="breadcrumb-item">
      <a
        href="../index.html"
        class="nav-link"
        aria-label="Home"
      >
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
     
    <li class="breadcrumb-item">
      <a href="index.html" class="nav-link">How-to</a>
    </li>
      
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">gRPC API packages</span></li>
    
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="grpc-api-packages">
<h1>gRPC API packages<a class="headerlink" href="#grpc-api-packages" title="Link to this heading">#</a></h1>
<p>Protobuf service definitions provide the API specification for underlying
server implementations so that each consuming client library has a clear
contract for gRPC data messages. Ideally, the Protobuf (<code class="docutils literal notranslate"><span class="pre">.proto</span></code>) files
have a single repository established as the source of truth, organized by
API version increment as the API definition expands and changes. Because
most client libraries are custom implementations enhancing the developer
experience when consuming the service, releasing the Protobuf definitions
publicly gives full flexibility to developers to operate at the abstraction
layer they choose.</p>
<section id="maintain-api-definition-repository">
<h2>Maintain API definition repository<a class="headerlink" href="#maintain-api-definition-repository" title="Link to this heading">#</a></h2>
<p>Because the Protobuf definition of the service is language agnostic, the repository
containing the PROTO files can be created within the top-level
<a class="reference external" href="https://github.com/ansys">Ansys GitHub organization</a>.</p>
<p>Every update of the PROTO files follows a standard pull request process as a
sanity check for API definition accuracy. Language-specific packages can be
generated for each merge or on a set cadence.</p>
</section>
<section id="manage-protobuf-definitions-for-python-clients">
<h2>Manage Protobuf definitions for Python clients<a class="headerlink" href="#manage-protobuf-definitions-for-python-clients" title="Link to this heading">#</a></h2>
<p>Within Ansys, and more specifically in the PyAnsys environment, most client libraries
have a dedicated Python package containing the needed PROTO files compiled as
Python source code. These are typically consumed by the PyAnsys client libraries
for communicating with their respective services.</p>
<p>For example, <a class="reference external" href="https://github.com/ansys/pymapdl">PyMAPDL</a> consumes the <code class="docutils literal notranslate"><span class="pre">ansys-api-mapdl</span></code> package, which is built in the
<a class="reference external" href="https://pypi.org/project/ansys-api-mapdl/">ansys-api-mapdl</a> repository.</p>
<section id="build-an-ansys-api-service-repository">
<h3>Build an <code class="docutils literal notranslate"><span class="pre">ansys-api-&lt;service&gt;</span></code> repository<a class="headerlink" href="#build-an-ansys-api-service-repository" title="Link to this heading">#</a></h3>
<p>The Ansys GitHub organization has a dedicated template repository for creating
PROTO file repositories and the needed files to generate the Python API
packages to be consumed by the PyAnsys clients.</p>
<p>To set up an API repository like the <code class="docutils literal notranslate"><span class="pre">ansys-api-mapdl</span></code> one,
select the <a class="reference external" href="https://github.com/ansys/ansys-api-template">ansys-api-template</a> repository
when creating a repository within the Ansys GitHub organization.</p>
<p>To understand how to use the <code class="docutils literal notranslate"><span class="pre">ansys-api-template</span></code> repository, see
<a class="reference external" href="https://github.com/ansys/ansys-api-template#expected-usage">Expected usage</a>
in this repository’s README.</p>
</section>
<section id="build-python-stub-classes">
<h3>Build Python stub classes<a class="headerlink" href="#build-python-stub-classes" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ansys-api-template</span></code> repository uses the <a class="reference external" href="https://github.com/ansys/ansys-tools-protoc-helper/">ansys-tools-protoc-helper</a>
utility to auto-generate Python wheels that can be consumed by downstream Python client libraries.</p>
<p>To use the <code class="docutils literal notranslate"><span class="pre">ansys-tools-protoc-helper</span></code> utility, include it in the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file as a build dependency:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;setuptools &gt;= 42.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;wheel&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ansys_tools_protoc_helper&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Then generate a Python wheel containing the autogenerated Python source with
these commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>pip
pip<span class="w"> </span>install<span class="w"> </span>build
python<span class="w"> </span>-m<span class="w"> </span>build
</pre></div>
</div>
</section>
<section id="publish-the-api-package">
<h3>Publish the API package<a class="headerlink" href="#publish-the-api-package" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://pypi.org/">PyPI</a> is the common package manager where API packages are released.</p>
<p>Here is an example of a workflow pipeline for building and publishing the Python stub package.
In this example, the <code class="docutils literal notranslate"><span class="pre">ansys-api-geometry</span></code> workflow is shown. However, you can easily copy
and adapt this workflow. Only the <code class="docutils literal notranslate"><span class="pre">PYTHON_PACKAGE_IMPORT</span></code> environment variable would have
to be changed:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GitHub CI</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">tags</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>

<span class="nt">env</span><span class="p">:</span>
<span class="w">  </span><span class="nt">MAIN_PYTHON_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.10&#39;</span>
<span class="w">  </span><span class="nt">PYTHON_PACKAGE_IMPORT</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ansys.api.geometry.v0&#39;</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build package</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v3</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup Python</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ env.MAIN_PYTHON_VERSION }}</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install build requirements</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">pip install -U pip</span>
<span class="w">          </span><span class="no">pip install build</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python -m build</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip install dist/*.whl</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Test import</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">mkdir tmp</span>
<span class="w">          </span><span class="no">cd tmp</span>
<span class="w">          </span><span class="no">python -c &quot;import ${{ env.PYTHON_PACKAGE_IMPORT }}; print(&#39;Successfully imported ${{ env.PYTHON_PACKAGE_IMPORT }}&#39;)&quot;</span>
<span class="w">          </span><span class="no">python -c &quot;from  import __version__; print(__version__)&quot;</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload packages</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v3</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ansys-api-package</span>
<span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dist/</span>
<span class="w">          </span><span class="nt">retention-days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>

<span class="w">  </span><span class="nt">release</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Release package</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">github.event_name == &#39;push&#39; &amp;&amp; contains(github.ref, &#39;refs/tags&#39;)</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">build</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ env.MAIN_PYTHON_VERSION }}</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/download-artifact@v3</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Display structure of downloaded files</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ls -R</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload to Public PyPi</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">pip install twine</span>
<span class="w">          </span><span class="no">twine upload --skip-existing ./**/*.whl</span>
<span class="w">          </span><span class="no">twine upload --skip-existing ./**/*.tar.gz</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">          </span><span class="nt">TWINE_USERNAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__token__</span>
<span class="w">          </span><span class="nt">TWINE_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.PYPI_TOKEN }}</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Release</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">softprops/action-gh-release@v1</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">generate_release_notes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">          </span><span class="nt">files</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">            </span><span class="no">./**/*.whl</span>
<span class="w">            </span><span class="no">./**/*.tar.gz</span>
<span class="w">            </span><span class="no">./**/*.pdf</span>
</pre></div>
</div>
<section id="version-the-api-package">
<h4>Version the API package<a class="headerlink" href="#version-the-api-package" title="Link to this heading">#</a></h4>
<p>PyPI packages follow semantic versioning while gRPC Protobuf API versions
typically follow a simplified <code class="docutils literal notranslate"><span class="pre">v*</span></code> versioning pattern. The PyPI package
version is not expected to synchronize with the Protobuf API version, and
multiple public APIs can be exposed simultaneously. For example, if you have a
<code class="docutils literal notranslate"><span class="pre">v0</span></code> for MAPDL exposed, you can access it with this code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ansys.api.mapdl.v0</span><span class="w"> </span><span class="kn">import</span> <span class="n">mapdl_pb2_grpc</span>
</pre></div>
</div>
<p>While if the API has a <code class="docutils literal notranslate"><span class="pre">v1</span></code> API exposed, a different library could also use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ansys.api.mapdl.v1</span><span class="w"> </span><span class="kn">import</span> <span class="n">mapdl_pb2_grpc</span>
</pre></div>
</div>
<p>Ansys follows <a class="reference external" href="https://learn.microsoft.com/en-us/aspnet/core/grpc/versioning">Microsoft’s gRPC versioning</a>
recommendations, which stipulate that incrementing the gRPC Protobuf version is
only necessary when making a backwards breaking change. Non-breaking changes
include:</p>
<ul class="simple">
<li><p>Adding a service</p></li>
<li><p>Adding a method to a service</p></li>
<li><p>Adding a field to a request message</p></li>
</ul>
<p>However, this only applies to the <code class="docutils literal notranslate"><span class="pre">vN</span></code> gRPC Protobuf API. Python packages
tend to follow semantic versioning, and PyAnsys packages follow this
approach. Therefore, these Python gRPC API packages should also follow semantic
versioning.</p>
<ul class="simple">
<li><p>Plan on releasing a new minor version when adding or removing features, messages,
and services.</p></li>
<li><p>Plan on releasing a patch release when fixing bugs that do not change the behavior
of the API.</p></li>
</ul>
<p>Only plan on releasing a major release once the API is stable and no
major release is scheduled in the near future.</p>
<p>This way, you can expose a <code class="docutils literal notranslate"><span class="pre">v0</span></code> and/or <code class="docutils literal notranslate"><span class="pre">v1</span></code> gRPC Protobuf API and release
frequent updates using semantic versioning.</p>
</section>
<section id="release-the-api-package">
<h4>Release the API package<a class="headerlink" href="#release-the-api-package" title="Link to this heading">#</a></h4>
<p>As shown in the <code class="docutils literal notranslate"><span class="pre">release</span></code> section of the previous GitHub workflow, once the Python
API package is compiled it is then uploaded to the public PyPI. In order to do
so, it is necessary to have access to the <code class="docutils literal notranslate"><span class="pre">PYPI_TOKEN</span></code> within the GitHub
repository. To get the needed credentials, contact the
<a class="reference external" href="mailto:pyansys&#46;core&#37;&#52;&#48;ansys&#46;com">PyAnsy core team</a>.</p>
<p>If the repository cannot be uploaded to the public PyPI yet but your Python
client library needs to consume this Python API package, it can be
uploaded to the private PyAnsys PyPI. For the required <code class="docutils literal notranslate"><span class="pre">PYANSYS_PYPI_PRIVATE_PAT</span></code>
password, contact the <a class="reference external" href="mailto:pyansys&#46;core&#37;&#52;&#48;ansys&#46;com">PyAnsy core team</a>.</p>
<p>In this last case, the <code class="docutils literal notranslate"><span class="pre">Upload</span> <span class="pre">to</span> <span class="pre">Public</span> <span class="pre">PyPi</span></code> workflow section should be
replaced with the <code class="docutils literal notranslate"><span class="pre">Upload</span> <span class="pre">to</span> <span class="pre">Private</span> <span class="pre">PyPi</span></code> workflow section:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload to Private PyPi</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">run</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">pip install twine</span>
<span class="w">      </span><span class="no">twine upload --skip-existing ./**/*.whl</span>
<span class="w">      </span><span class="no">twine upload --skip-existing ./**/*.tar.gz</span>
<span class="w">    </span><span class="nt">env</span><span class="p">:</span>
<span class="w">      </span><span class="nt">TWINE_USERNAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PAT</span>
<span class="w">      </span><span class="nt">TWINE_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.PYANSYS_PYPI_PRIVATE_PAT }}</span>
<span class="w">      </span><span class="nt">TWINE_REPOSITORY_URL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://pkgs.dev.azure.com/pyansys/_packaging/pyansys/pypi/upload</span>
</pre></div>
</div>
</section>
</section>
<section id="consume-the-api-package-within-python">
<h3>Consume the API package within Python<a class="headerlink" href="#consume-the-api-package-within-python" title="Link to this heading">#</a></h3>
<p>Once the API package has been published to PyPI, you can include a reference
within the client library build dependencies. For information on how to specify
a project’s required dependencies, see <a class="reference internal" href="packaging.html#required-dependencies"><span class="std std-ref">Required dependencies</span></a>.</p>
</section>
<section id="use-the-api-package-within-the-python-client">
<h3>Use the API package within the Python client<a class="headerlink" href="#use-the-api-package-within-the-python-client" title="Link to this heading">#</a></h3>
<p>The stub imports follow a standard pattern. For each API service, there is a <code class="docutils literal notranslate"><span class="pre">*_pb2</span></code>
module that defines all messages within a specific service file and
a <code class="docutils literal notranslate"><span class="pre">*_pb2_grpc</span></code> module that defines a <code class="docutils literal notranslate"><span class="pre">Stub</span></code> class that encapsulates all service methods.</p>
<section id="example-grpc-imports-within-the-wrapping-client-library">
<h4>Example gRPC imports within the wrapping client library<a class="headerlink" href="#example-grpc-imports-within-the-wrapping-client-library" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ansys.api.geometry.v0.designs_pb2</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">ExportDesignRequest</span><span class="p">,</span>
    <span class="n">NewDesignRequest</span><span class="p">,</span>
    <span class="n">SaveAsDocumentRequest</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.api.geometry.v0.designs_pb2_grpc</span><span class="w"> </span><span class="kn">import</span> <span class="n">DesignsStub</span>
</pre></div>
</div>
<p>The best practice is to create a Pythonic client library that organizes the service methods
in a user-friendly manner. At a minimum, this library should act as a facade layer wrapping the
service calls so that the Pythonic API can have a consistent abstraction, independent of
underlying implementations.</p>
<p>For each client library release, only a single gRPC API version should be wrapped
to maintain a consistent API abstraction expectation for the supporting server instances.</p>
</section>
</section>
<section id="public-versus-private-python-api-package">
<h3>Public versus private Python API package<a class="headerlink" href="#public-versus-private-python-api-package" title="Link to this heading">#</a></h3>
<p>Making the PROTO files for a public or private repository is up to the owner of each repository.</p>
<p>In terms of intellectual property (IP) concerns, the PROTO files are typically not an
issue because they do not expose any critical service logic or knowledge. In most cases,
the APIs being exposed through the PROTO files are already exposed publicly through other
mechanisms.</p>
<p>Thus, the general recommendation is to make these repositories public as soon as possible. The
main reasons for doing so follow:</p>
<ul class="simple">
<li><p>Private Python package dependencies usually involve workarounds when setting up the
workflow. It is best to keep the workflows as standard and simple as possible. That
implies making all its dependencies public, including this API Python package.</p></li>
<li><p>The API Python package generated eventually must be uploaded to the public PyPI so
that it can be consumed by its corresponding Python client library (when it is publicly released).
So, if there are no issues with making it public, it is better to do so sooner rather than later.</p></li>
<li><p>Once the Python API package is publicly released to PyPI, there is no reason to keep the
repository private because all users who consume the Python API package have direct access
to the PROTO files that are in the repository.</p></li>
</ul>
<p>However, before making any repository public in the <a class="reference external" href="https://github.com/ansys">Ansys GitHub organization</a>, review
the <a class="reference external" href="https://supreme-invention-8c3992a9.pages.github.io/index.html">Ansys Open Source Developer’s Guide</a>
to verify that the repository is compliant with all the needed requirements.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#maintain-api-definition-repository">Maintain API definition repository</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manage-protobuf-definitions-for-python-clients">Manage Protobuf definitions for Python clients</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-an-ansys-api-service-repository">Build an <code class="docutils literal notranslate"><span class="pre">ansys-api-&lt;service&gt;</span></code> repository</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-python-stub-classes">Build Python stub classes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#publish-the-api-package">Publish the API package</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#version-the-api-package">Version the API package</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#release-the-api-package">Release the API package</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#consume-the-api-package-within-python">Consume the API package within Python</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-the-api-package-within-the-python-client">Use the API package within the Python client</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-grpc-imports-within-the-wrapping-client-library">Example gRPC imports within the wrapping client library</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#public-versus-private-python-api-package">Public versus private Python API package</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item"> 
<div class="tocsection editthispage">
  <a href="None">
    <i class="fa-solid fa-pencil"></i>
       Edit
    on GitHub  
  </a>
</div>

</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <ul class="this-page-menu">
      <li><a href="../_sources/how-to/grpc-api-packages.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>


  <!-- Include desired assets -->
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.7/require.min.js"></script>

<script>
// Passing the search options to the search.js file
const SEARCH_OPTIONS = JSON.parse('{"ignoreLocation": true, "keys": ["title", "text", "objectID"], "limit": 10, "min_chars_for_search": 2, "threshold": 0.5}');
const SEARCH_FILE = "../_static/search.json";
const ADVANCE_SEARCH_PATH = "../search.html";
const EXTRA_SOURCES = JSON.parse('""');
</script>


<script src="../_static/js/search.js"></script>

  
  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright (c) 2025 ANSYS, Inc. All rights reserved.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the
  <a href="https://sphinxdocs.ansys.com/version/stable/index.html"
    >Ansys Sphinx Theme</a
  >
  1.6.3. <br />Last updated on
  <span id="ast_build_date"></span>
</p>
<script>
  var options = { day: "numeric", month: "long", year: "numeric" };
  var ast_lastModifiedDate = new Date(document.lastModified);
  var ast_build_date = ast_lastModifiedDate.toLocaleDateString("en-US", options);
  document.getElementById("ast_build_date").innerHTML = ast_build_date;
</script></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>